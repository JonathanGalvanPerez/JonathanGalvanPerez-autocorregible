(this["webpackJsonpchallenge-superhero"]=this["webpackJsonpchallenge-superhero"]||[]).push([[0],{104:function(e,t,r){},105:function(e,t,r){},242:function(e,t,r){},243:function(e,t,r){"use strict";r.r(t);var n=r(0),a=r.n(n),c=r(41),s=r.n(c),o=(r(104),r(105),r(22)),i=r(4),l=r(15),u=r(3),d=r(11),j=r(1),m={intelligence:"#3c096c",strength:"#40916c",speed:"#0466c8",durability:"black",power:"#c1121f",combat:"#fca311"};function b(e){var t=e.value,r=e.name,n="null"===t?0:t+"%",a=r?{width:n,backgroundColor:m[r]}:{width:n};return Object(j.jsx)("div",{style:a,className:"progress-bar progress-bar-striped",role:"progressbar","aria-valuemin":"0","aria-valuemax":"100",children:r||n})}function h(){var e=Object(u.c)((function(e){return e.team})),t=Object(d.a)(e.stats).sort((function(e,t){return t.value-e.value})),r=0===e.heroes.length?0:(e.totalHeight/e.heroes.length).toFixed(2),n=0===e.heroes.length?0:(e.totalWeight/e.heroes.length).toFixed(2);return Object(j.jsxs)("div",{className:"col-12 col-xl-10 my-2 py-3 mx-auto rounded-md shadow",style:{backgroundImage:"url(/images/comic-background-stats.jpg)",backgroundSize:"cover",backgroundPosition:"center"},children:[Object(j.jsx)("ol",{className:"row justify-content-around",children:t.map((function(e){return Object(j.jsx)("li",{className:"col-6 col-md-4 col-lg-2 mb-2",children:Object(j.jsxs)("div",{className:"bg-light rounded-pill py-2",children:[Object(j.jsxs)("strong",{children:[e.name,": "]}),e.value]})},e.name)}))}),Object(j.jsx)("div",{className:"progress rounded-xs",style:{height:"25px"},children:t.map((function(e){return Object(j.jsx)(b,{value:e.value,name:e.name},e.name)}))}),Object(j.jsxs)("div",{className:"row row-cols-1 row-cols-md-2 mt-2",children:[Object(j.jsx)("div",{className:"col mb-2 mb-md-0",children:Object(j.jsxs)("div",{className:"bg-light rounded-pill py-2",children:[Object(j.jsx)("strong",{children:"Altura Promedio: "}),r," cm"]})}),Object(j.jsx)("div",{className:"col",children:Object(j.jsxs)("div",{className:"bg-light rounded-pill py-2",children:[Object(j.jsx)("strong",{children:"Peso Promedio: "}),n," kg"]})})]})]})}var p=r(6),g=r(26),x=Object(g.c)({name:"team",initialState:{heroes:[],stats:[{name:"intelligence",value:0},{name:"strength",value:0},{name:"speed",value:0},{name:"durability",value:0},{name:"power",value:0},{name:"combat",value:0}],totalHeight:0,totalWeight:0},reducers:{addHero:function(e,t){var r=t.payload;if(!e.heroes.find((function(e){return e.id===r.id}))){e.heroes.push(r);var n=function(t){var n=e.stats.findIndex((function(e){return e.name===t}));"null"!==r.powerstats[t]&&(e.stats[n].value+=Number(r.powerstats[t]))};for(var a in r.powerstats)n(a);"null"!==r.height&&(e.totalHeight+=Number(r.height)),"null"!==r.weight&&(e.totalWeight+=Number(r.weight))}},deleteHero:function(e,t){var r=t.payload,n=e.heroes.findIndex((function(e){return e.id===r}));if(-1!==n){var a=e.heroes.splice(n,1),c=Object(p.a)(a,1)[0],s=function(t){var r=e.stats.findIndex((function(e){return e.name===t})),n=c.powerstats[t];"null"!==n&&(e.stats[r].value-=Number(n))};for(var o in c.powerstats)s(o);"null"!==c.height&&(e.totalHeight-=Number(c.height)),"null"!==c.weight&&(e.totalWeight-=Number(c.weight))}}}}),O=x.actions,f=O.addHero,v=O.deleteHero,N=x.reducer,w=r(7),y=r.n(w),k=r(16),S=r(45),I=r.n(S),q={success:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"OK";I.a.fire({title:e,text:t,icon:"success",confirmButtonText:r})},error:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"Volver";I.a.fire({title:e,text:t,icon:"error",confirmButtonText:r})},confirm:function(){var e=Object(k.a)(y.a.mark((function e(t,r){var n,a=arguments;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=a.length>2&&void 0!==a[2]?a[2]:"Seguro",a.length>3&&void 0!==a[3]?a[3]:"Hecho",e.abrupt("return",I.a.fire({title:t,text:r,icon:"question",showCancelButton:!0,confirmButtonText:n,cancelButtonText:"Cancelar",reverseButtons:!0}).then((function(e){return!!e.isConfirmed})));case 3:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}()};function C(e){var t=e.hero,r=Object(u.b)();return Object(j.jsx)("div",{className:"col-12 col-sm-6 col-lg-4 col-xl-3 p-1",children:Object(j.jsxs)("div",{className:"alkemy-card rounded-lg overflow-hidden",children:[Object(j.jsx)("img",{className:"card-img-top",src:t.image.url,alt:"Superheroe",style:{height:"320px",objectFit:"cover"}}),Object(j.jsxs)("div",{className:"card-body py-2",children:[Object(j.jsx)("h5",{className:"card-title m-0",children:t.name}),Object(j.jsx)("ul",{className:"card-text my-2",children:Object.keys(t.powerstats).map((function(e){return Object(j.jsxs)("li",{children:[Object(j.jsx)("strong",{children:e}),":",Object(j.jsx)("div",{className:"progress",style:{height:"12px"},children:Object(j.jsx)(b,{value:t.powerstats[e]})})]},e)}))}),Object(j.jsx)(l.b,{as:"button",to:"/hero/".concat(t.id),className:"alkemy-btn-success mr-2",children:"Detalles"}),Object(j.jsx)("button",{onClick:function(){r(v(t.id)),q.success("Listo","Se ha eliminido al superheroe de su equipo")},className:"alkemy-btn-danger",children:"Eliminar"})]})]})})}function H(){var e=Object(u.c)((function(e){return e.team.heroes}));return console.log("Team: ",e),Object(j.jsxs)("div",{children:[Object(j.jsx)("h2",{className:"jumbotron m-0",children:"Tu equipo de superheroes"}),Object(j.jsx)("div",{className:"d-flex flex-nowrap overflow-auto scrollable",children:0===e.length?Object(j.jsx)("h5",{className:"mx-auto my-4",children:"No hay ningun superheroe en su equipo"}):e.map((function(e){return Object(j.jsx)(C,{hero:e},e.id)}))}),Object(j.jsx)(h,{})]})}function B(e){var t=e.hero,r=e.included,a=Object(u.b)(),c=Object(n.useState)(r),s=Object(p.a)(c,2),o=s[0],i=s[1];return Object(j.jsx)("div",{className:"col p-1",children:Object(j.jsxs)("div",{className:"alkemy-card rounded-xs overflow-hidden",children:[Object(j.jsx)("img",{className:"card-img-top",src:t.image.url,alt:"Superhero",style:{height:"320px",objectFit:"cover"}}),Object(j.jsxs)("div",{className:"card-body",children:[Object(j.jsx)("h5",{className:"card-title",children:t.name}),Object(j.jsx)("button",{onClick:function(){o||(a(f(t)),i(!0))},className:"alkemy-btn-primary",children:o?"Agregado":"Agregar"})]})]})})}var E=r(46),A=r.n(E),F="https://thingproxy.freeboard.io/fetch/https://superheroapi.com/api/4174620429250377",P={login:function(){var e=Object(k.a)(y.a.mark((function e(t){var r,n;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,A.a.post("http://challenge-react.alkemy.org",t);case 2:return r=e.sent,n=r.data,e.abrupt("return",n);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),searchHero:function(){var e=Object(k.a)(y.a.mark((function e(t){var r,n;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,A.a.get("".concat(F,"/search/").concat(t));case 2:return r=e.sent,(n=r.data).error||(n=n.results.map((function(e){return{id:e.id,name:e.name,powerstats:e.powerstats,image:e.image,height:e.appearance.height[1].replace(" cm",""),weight:e.appearance.weight[1].replace(" kg","")}}))),e.abrupt("return",n);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),getHero:function(){var e=Object(k.a)(y.a.mark((function e(t){var r,n;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,A.a.get("".concat(F,"/").concat(t));case 2:if(r=e.sent,"success"!==(n=r.data).response){e.next=6;break}return e.abrupt("return",{name:n.name,aliases:n.biography.aliases,workplace:n.work.base,height:n.appearance.height[1].replace(" cm",""),weight:n.appearance.weight[1].replace(" kg",""),eyeColor:n.appearance["eye-color"],hairColor:n.appearance["hair-color"],image:n.image.url});case 6:return e.abrupt("return",n.results);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()};function R(e){var t=e.onSearch,r=e.setLoading,a=Object(n.useState)(""),c=Object(p.a)(a,2),s=c[0],o=c[1],i=function(){var e=Object(k.a)(y.a.mark((function e(){var n;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r(!0),e.next=3,P.searchHero(s);case 3:(n=e.sent).error?q.error("No encontrado!","El superheroe que buscas no se encontr\xf3 en la base de datos"):t(n),r(!1);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(j.jsxs)("div",{className:"input-group border rounded-pill mb-4 col-md-10 col-lg-8 p-0 mx-auto overflow-hidden",children:[Object(j.jsx)("input",{type:"search",className:"alkemy-form-control pl-4 pr-2",placeholder:"Nombre del superheroe",value:s,onChange:function(e){return o(e.target.value)},onKeyUp:function(e){"Enter"===e.code&&i()}}),Object(j.jsx)("div",{className:"input-group-append",children:Object(j.jsxs)("button",{type:"button",className:"alkemy-btn-success m-0 d-flex align-items-center",onClick:i,children:[Object(j.jsx)("span",{className:"material-icons",children:"search"}),"Buscar"]})})]})}function T(){var e=Object(n.useState)([]),t=Object(p.a)(e,2),r=t[0],a=t[1],c=Object(n.useState)(!1),s=Object(p.a)(c,2),o=s[0],i=s[1],l=Object(u.c)((function(e){return e.team.heroes}));return console.log("data: ",r),Object(j.jsxs)("div",{children:[Object(j.jsx)("h2",{className:"jumbotron",children:"Ingrese el nombre del superheroe"}),Object(j.jsx)(R,{onSearch:a,setLoading:i}),o?Object(j.jsx)("div",{className:"spinner-border alkemy-spinner mx-auto my-5",role:"status","aria-hidden":"true"}):Object(j.jsx)("div",{className:"row row-cols-1 row-cols-sm-2 row-cols-md-3 row-cols-lg-4 mx-auto",children:r.map((function(e){return Object(j.jsx)(B,{hero:e,included:l.find((function(t){return t.id===e.id}))},e.id)}))})]})}function W(){var e=Object(i.h)().id,t=Object(n.useState)({}),r=Object(p.a)(t,2),a=r[0],c=r[1],s=Object(n.useState)(!0),o=Object(p.a)(s,2),l=o[0],u=o[1];Object(n.useEffect)((function(){P.getHero(e).then((function(e){c(e),u(!1)}))}),[e]);return l?Object(j.jsx)("div",{className:"mt-5",children:Object(j.jsx)("div",{className:"spinner-border"})}):Object(j.jsxs)("div",{className:"d-flex flex-wrap align-items-stretch rounded shadow",style:{backgroundImage:"url(/images/background-detail.jpg)",backgroundSize:"cover",backgroundPosition:"center"},children:[Object(j.jsx)("img",{className:"col-12 col-sm-6 col-lg-4 rounded p-1",width:"40%",src:a.image,alt:"Superhero"}),Object(j.jsxs)("ul",{className:"col-12 col-sm-6 col-lg-8 text-left p-3 d-flex flex-column justify-content-around",children:[Object(j.jsxs)("li",{children:[Object(j.jsx)("strong",{children:"Nombre: "}),a.name]}),Object(j.jsxs)("li",{children:[Object(j.jsx)("strong",{children:"Alias: "}),a.aliases.join(", ")]}),Object(j.jsxs)("li",{children:[Object(j.jsx)("strong",{children:"Lugar de trabajo: "}),a.workplace]}),Object(j.jsxs)("li",{children:[Object(j.jsx)("strong",{children:"Altura: "}),a.height," cm"]}),Object(j.jsxs)("li",{children:[Object(j.jsx)("strong",{children:"Peso: "}),a.weight," kg"]}),Object(j.jsxs)("li",{children:[Object(j.jsx)("strong",{children:"Color de ojos: "}),a.eyeColor]}),Object(j.jsxs)("li",{children:[Object(j.jsx)("strong",{children:"Color de pelo: "}),a.hairColor]})]})]})}function L(){return Object(j.jsxs)(i.d,{children:[Object(j.jsx)(i.b,{exact:!0,path:"/home",component:H}),Object(j.jsx)(i.b,{exact:!0,path:"/search",component:T}),Object(j.jsx)(i.b,{exact:!0,path:"/hero/:id",component:W}),Object(j.jsx)(i.a,{path:"/**",to:"/home"})]})}var J,z=r(29),D=Object(g.b)("login",function(){var e=Object(k.a)(y.a.mark((function e(t,r){return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,P.login(t);case 3:return e.abrupt("return",e.sent);case 6:throw e.prev=6,e.t0=e.catch(0),e.t0;case 9:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(t,r){return e.apply(this,arguments)}}()),K=Object(g.c)({name:"login",initialState:{token:JSON.parse(localStorage.getItem("token")),currentRequestId:"",loading:"idle",error:""},reducers:{logout:function(e){e.token=null}},extraReducers:(J={},Object(z.a)(J,D.fulfilled,(function(e,t){t.meta.requestId===e.currentRequestId&&(e.token=t.payload.token,e.loading="idle",e.error="",e.currentRequestId="")})),Object(z.a)(J,D.pending,(function(e,t){e.currentRequestId=t.meta.requestId,e.loading="pending"})),Object(z.a)(J,D.rejected,(function(e,t){t.meta.requestId===e.currentRequestId&&(e.currentRequestId=t.meta.requestId,e.loading="idle",e.error=t.error)})),J)}),V=K.actions.logout,M=function(e){return null!==e.login.token},U=function(e){return"pending"===e.login.loading},$=K.reducer;function G(){var e=Object(u.b)();return Object(j.jsxs)("nav",{className:"d-flex bg-primary px-2 px-sm-3",children:[Object(j.jsx)("img",{src:"/images/apple-touch-icon.png",alt:"logo icon",height:"50px",className:"rounded-md my-2 mr-2"}),Object(j.jsxs)("ul",{className:"nav nav-tabs bg-primary ",children:[Object(j.jsx)("li",{className:"nav-item",children:Object(j.jsx)(l.b,{className:"nav-link",to:"/home",children:"Inicio"})}),Object(j.jsx)("li",{className:"nav-item",children:Object(j.jsx)(l.b,{className:"nav-link",to:"/search",children:"Buscar"})})]}),Object(j.jsx)("button",{onClick:function(){e(V()),console.log("deslogueado con exito")},className:"alkemy-btn-danger ml-auto rounded-md my-2",children:"Deslogearse"})]})}function Q(){return Object(u.c)(M)?Object(j.jsxs)("div",{className:"container p-0",children:[Object(j.jsx)(G,{}),Object(j.jsx)("div",{className:"p-2 bg-light",children:Object(j.jsx)(L,{})})]}):Object(j.jsx)(i.a,{to:"/login"})}var X=r(34),Y=r(47);r(242);function Z(e){var t=e.onSubmit,r=Object(u.c)(U),n=Y.a({email:Y.b().email("Debe ser un email valido").required("Este campo es requerido"),password:Y.b().required("Este campo es requerido")});return Object(j.jsx)(X.c,{initialValues:{email:"",password:""},onSubmit:t,validationSchema:n,children:Object(j.jsx)(X.b,{children:Object(j.jsxs)("div",{className:"col-md-8 p-0 mx-auto",children:[Object(j.jsx)(X.a,{name:"email",children:function(e){var t=e.field,r=e.form;return Object(j.jsxs)("div",{className:"form-group",children:[Object(j.jsx)("label",{htmlFor:"email-input",className:"alkemy-form-label",children:"Email"}),Object(j.jsx)("input",Object(o.a)({type:"email",className:"alkemy-form-control",id:"email-input"},t)),r.errors.email&&r.touched.email&&Object(j.jsx)("div",{className:"alkemy-alert-danger",children:r.errors.email})]})}}),Object(j.jsx)(X.a,{name:"password",children:function(e){var t=e.field,r=e.form;return Object(j.jsxs)("div",{className:"form-group",children:[Object(j.jsx)("label",{htmlFor:"password-input",className:"alkemy-form-label",children:"Contrase\xf1a"}),Object(j.jsx)("input",Object(o.a)({type:"password",className:"alkemy-form-control",id:"password-input"},t)),r.errors.password&&r.touched.password&&Object(j.jsx)("div",{className:"alkemy-alert-danger",children:r.errors.password})]})}}),Object(j.jsx)("button",{className:"alkemy-btn-primary",type:"submit",children:r?Object(j.jsxs)("div",{className:"d-flex align-items-center",children:[Object(j.jsx)("strong",{className:"mr-2",children:"Cargando... "}),Object(j.jsx)("div",{className:"spinner-border alkemy-spinner",role:"status","aria-hidden":"true"})]}):"Iniciar Sesi\xf3n"})]})})})}function _(){var e=Object(u.b)(),t=Object(i.g)();return Object(u.c)(M)?Object(j.jsx)(i.a,{to:"/home"}):Object(j.jsxs)("div",{className:"container my-2",children:[Object(j.jsx)("h1",{className:"text-white bg-primary py-4",children:"Inicia Sesi\xf3n"}),Object(j.jsx)(Z,{onSubmit:function(r,n){e(D(r)).then((function(e){e.error?q.error("No se pudo iniciar sesi\xf3n","el email o la contrase\xf1a son incorrectos"):(q.success("Listo","Ha iniciado sesion con exito"),t.push("/"))}))}})]})}var ee=function(e){return Object(u.c)(M)?Object(j.jsx)(i.b,Object(o.a)({},e)):Object(j.jsx)(i.a,{to:"/login"})};function te(){return Object(j.jsx)(j.Fragment,{children:Object(j.jsx)(l.a,{children:Object(j.jsxs)(i.d,{children:[Object(j.jsx)(i.b,{exact:!0,path:"/login",component:_}),Object(j.jsx)(ee,{path:"/",component:Q}),Object(j.jsx)(i.a,{path:"/**",to:"/"})]})})})}var re={backgroundImage:"url(/images/comic-background.jpg)",backgroundSize:"cover",backgroundPosition:"center",backgroundAttachment:"fixed",minHeight:"100vh"};var ne=function(){return Object(j.jsx)("div",{className:"App py-md-2",style:re,children:Object(j.jsx)(te,{})})},ae=Object(g.a)({reducer:{login:$,team:N}});window.onbeforeunload=function(){localStorage.setItem("token",JSON.stringify(ae.getState().login.token))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));s.a.render(Object(j.jsx)(a.a.StrictMode,{children:Object(j.jsx)(u.a,{store:ae,children:Object(j.jsx)(ne,{})})}),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[243,1,2]]]);
//# sourceMappingURL=main.3265d721.chunk.js.map